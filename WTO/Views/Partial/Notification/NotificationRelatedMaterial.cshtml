@model List<BusinessObjects.Notification.RelatedMaterial>
@{
    Layout = null;
}

<script src="~/JQuery/Notification_PartialPages.js"></script>

<div class="panel-heading" role="tab" id="headingFifth">
    <h4 class="panel-title Accordian-panel-title">
        <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseFifth" aria-expanded="false" aria-controls="collapseFifth">
            <i class="more-less glyphicon glyphicon-chevron-down"></i> Addendum/Corrigendum/Revision
        </a>
    </h4>
</div>
<div id="collapseFifth" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingThree">
    <div class="panel-body Accordian-body">
        <div class="col-xs-12 col-sm-12 col-md-12 whitebackground padding-bottom-10" style="box-shadow: 0 0px 0 #fff, 0 1px 6px rgba(0,0,0, 0.1);">
            <div class="row top-offset-20">
                <div class="col-xs-12 col-sm-6 col-md-6">
                </div>
                <div class="col-xs-12 col-sm-6 col-md-6">
                    <p class="wto-label-normal">
                        <a class="btn btn-blue addstackholder" onclick="return OpenAddNotificationRelatedModal();">Add Addendum/Corrigendum/Revision</a>
                    </p>
                </div>
            </div>
            @if (Model != null && Model.Count > 0)
            {
                <div class="row top-offset-10">
                    <div class="col-xs-12 col-sm-12 col-md-12 top-offset-20">
                        <div class="table-responsive notificationlist">
                            <table class="table table-bordered display" cellspacing="0">
                                <thead class="second-blackbackground">
                                    <tr>
                                        <th style="width:10%;">Type</th>
                                        <th style="width:10%;">Date</th>
                                        <th style="width:15%;">Number</th>
                                        <th>Description</th>
                                        <th style="width:10%;">Attachment</th>
                                    </tr>
                                </thead>
                                <tbody class="whitebackground">
                                    @foreach (BusinessObjects.Notification.RelatedMaterial objRM in Model)
                                    {
                                        <tr>
                                            <td>@objRM.MaterialType</td>
                                            <td>@objRM.DateOfMaterial</td>
                                            <td>@objRM.MaterialNumber</td>
                                            <td>@objRM.MaterialDescription</td>
                                            <td><a href="@objRM.Attachment.Path" download="@objRM.Attachment.FileName">@objRM.Attachment.FileName</a></td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</div>

<!-- Add Addandom And corendom modal popup -->
<div class="modal fade selecthrmodal" id="AddNotificationRelatedModal" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-lg selecthrdialog">
        <div class="modal-content selecthrcontent">
            <div class="modal-header selecthrheader">
                <button type="button" class="close selecthrclose" onclick="return CloseAddNotificationRelatedModal();">
                    <span class="glyphicon glyphicon-remove"></span>
                </button>
            </div>
            <div class="modal-body selecthrbody">
                <div class="row">
                    <div class="col-xs-12 col-sm-12 col-md-12">
                        <div class="col-xs-12 col-sm-12 col-md-12 selecthrbodyinner" style="min-height:130px;">
                            <div class="col-xs-12 col-sm-12 col-md-12 top-offset-10">
                                <div class="notificationnumber padding-bottom-10">
                                    <div class="row">
                                        <div class="col-xs-12 col-sm-12 col-md-12">
                                            <h4 class="selecthrheading2">Add Addendum/Corrigendum/Revision</h4>
                                        </div>
                                    </div>
                                </div>
                                <div class="top-offset-10">
                                    <div class="row top-offset-10">
                                        <div class="col-xs-12 col-sm-4 col-md-4">
                                            <p class="wto-label-normal"><b>Type<sup class="mandetory">*</sup></b> <span class="pull-right">:</span></p>
                                        </div>
                                        <div class="col-xs-12 col-sm-8 col-md-8">
                                            <p class="wto-label-normal" id="divrdMaterialType">
                                                <label class="radio-inline">
                                                    <input type="radio" name="MaterialType" value="Addendum">Addendum
                                                </label>
                                                <label class="radio-inline">
                                                    <input type="radio" name="MaterialType" value="Corrigendum">Corrigendum
                                                </label>
                                                <label class="radio-inline">
                                                    <input type="radio" name="MaterialType" value="Revision">Revision
                                                </label>
                                            </p>
                                        </div>
                                    </div>
                                    <div class="divRelatedMatrialDetails hidden">
                                        <div class="row top-offset-10">
                                            <div class="col-xs-12 col-sm-4 col-md-4">
                                                <p class="wto-label-normal"><b><span class="MaterialType"></span> Number<sup class="mandetory">*</sup></b> <span class="pull-right">:</span></p>
                                            </div>
                                            <div class="col-xs-12 col-sm-8 col-md-8">
                                                <p class="wto-label-normal">
                                                    <input type="text" id="txtMaterialNumber" class="form-control textboxcontrol" />
                                                </p>
                                            </div>
                                        </div>
                                        <div class="row top-offset-10">
                                            <div class="col-xs-12 col-sm-4 col-md-4">
                                                <p class="wto-label-normal"><b>Date of <span class="MaterialType"></span> <sup class="mandetory">*</sup></b><span class="pull-right">:</span></p>
                                            </div>
                                            <div class="col-xs-12 col-sm-8 col-md-8">
                                                <p class="wto-label-normal">
                                                    <input type="text" id="txtDateOfMaterial" class="form-control date-picker textboxcontrol" />
                                                    <i class="glyphicon glyphicon-calendar form-control-feedback blue-color"></i>
                                                </p>
                                            </div>
                                        </div>
                                        <div class="row top-offset-10">
                                            <div class="col-xs-12 col-sm-4 col-md-4">
                                                <p class="wto-label-normal"><b><span class="MaterialType"></span> Description<sup class="mandetory">*</sup></b><span class="pull-right">:</span></p>
                                            </div>
                                            <div class="col-xs-12 col-sm-8 col-md-8">
                                                <p class="wto-label-normal">
                                                    <textarea id="txtMaterialDescription" class="form-control textboxcontrol AutoHeight" cols="30" rows="2"></textarea>
                                                </p>
                                            </div>
                                        </div>
                                        <div class="row top-offset-10">
                                            <div class="col-xs-12 col-sm-4 col-md-4">
                                                <p class="wto-label-normal"><b>Attachment<sup class="mandetory">*</sup></b><span class="pull-right">:</span></p>
                                            </div>
                                            <div class="col-xs-12 col-sm-2 col-md-2">
                                                <div class="fileinput fileinput-new" data-provides="fileinput">
                                                    <span class="btn btn-blue btn-padding btn-file" style="cursor: pointer;padding: 6px 10px !important;" onclick="AddMaterialAttachment();">
                                                        <span class="glyphicon glyphicon-open"></span>
                                                        <span class="puttext">Upload File</span>
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-xs-12 col-sm-4 col-md-4" style="padding-top: 5px;">
                                                <span class="fileinput-new dark-blue underline" id="lblMaterialAttachment" style="margin-right: 10px;"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-12 col-sm-12 col-md-12 top-offset-20 bottom-offset-20 divRelatedMatrialDetails hidden">
                                <div class="row">
                                    <div class="col-xs-12 col-sm-12 col-md-12">
                                        <a class="btn btn-red btn-padding pull-right left-offset-10 " onclick="return CloseAddNotificationRelatedModal();">Close</a>
                                        <a onclick="return ValidateNotificationRelatedMaterial();" class="btn btn-dark-green pull-right btn-padding" style="margin-right:15px;"><img src="/contents/img/save.png"> Save</a>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>

                <div id="divAddMaterialAttachmentOverlay" class="attachment-modal overlay" style="top: -35px;">
                    <div id="divAddMaterialAttachment" class="modal-dialog">
                        <div class="modal-content">
                            <form>
                                <div class="modal-header">
                                    <h4 class="modal-title" id="lblModalHeading">Add attachment</h4>
                                    <button type="button" class="close" onclick="return CloseMaterialAttachment()" aria-hidden="true" style="margin-top:-25px;">&times;</button>
                                </div>
                                <div class="modal-body">
                                    <div class="input-group">
                                        <label class="input-group-btn">
                                            <span class="btn btn-primary browse">
                                                Browse&hellip; <input type="file" style="display: none;" id="UploadMaterialAttachmentId">
                                            </span>
                                        </label>
                                        <input type="text" class="form-control" style="height:34px;" id="FileMaterialAttachmentId" readonly>
                                    </div>
                                    <span class="note pull-right">You can upload only word and pdf files.</span>
                                    <br />
                                    <input type="text" id="MaterialAttachmentNameId" class="form-control NoSpecialChar" placeholder="Attachment name" style="margin-top: 15px;">
                                </div>
                                <div class="modal-footer">
                                    <input type="button" class="btn btn-primary" value="Ok" onclick="UploadMaterialAttachmentOk();" />
                                    <input type="submit" class="btn btn-danger" value="Cancel" onclick="return CloseMaterialAttachment()" />
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Add Addandom And corendom modal popup -->

<script>
   $(document).ready(function () {
       $(".date-picker").datepicker({
           changeMonth: true,
           changeYear: true,
           dateFormat: 'dd M yy',
           minDate: 0
       });
   });
</script>