@model BusinessObjects.Notification.NotificationActions
@{
    Layout = null;
}
<script src="~/JQuery/Notification_PartialPages.js"></script>
@Html.Hidden("hdnNotificationActionId", "0")
@Html.Hidden("hdnActionId", "0")
<div class="panel-heading" role="tab" id="headingfive">
    <h4 class="panel-title Accordian-panel-title">
        <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapsefive" aria-expanded="false" aria-controls="collapsefive">
            <i class="more-less glyphicon glyphicon-chevron-down"></i>
            Actions
        </a>
    </h4>
</div>
<div id="collapsefive" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingfive">
    <div class="panel-body Accordian-body">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 whitebackground padding-bottom-10 full-border">
                <div class="row top-offset-30">
                    <div class="col-xs-12 col-sm-12 col-md-12">
                        <p class="wto-label-normal top-offset-10 @(Model.MeetingDate==""?"hidden":"")"> Discussed in Meeting on <span class="wto-label-bold" id="lblDiscussedOn">@Model.MeetingDate</span></p>
                    </div>
                </div>
                <div class="row top-offset-20">
                    <div class="col-xs-12 col-sm-12 col-md-12">
                        <div class="table-responsive nopaging notificationlist sentmail">
                            @if (Model.Actions != null)
                            {
                                <table class="table table-bordered display" id="notificationlist" cellspacing="0" width="100%">
                                    <thead class="second-blackbackground">
                                        <tr>
                                            <th>Action</th>
                                            <th class="text-center">Required on</th>
                                            <th class="text-center">Entered on</th>
                                            <th class="text-center">Document</th>
                                            <th></th>
                                            <th>Edit</th>
                                        </tr>
                                    </thead>
                                    <tbody class="whitebackground">
                                        @foreach (BusinessObjects.Notification.NotificationAction ac in Model.Actions)
                                        {
                                            <tr>
                                                <td>@ac.Action</td>
                                                <td class="text-center" id="tdRequiredOn_@ac.NotificationActionId">@ac.RequiredOn</td>
                                                <td class="text-center">@ac.EnteredOn</td>
                                                <td class="text-center"><a id="linkAttachment_@ac.NotificationActionId" href="@(ac.Attachment == null ? "" : ac.Attachment.Path)" class="light-blue" target="_blank">@(ac.Attachment == null ? "" : ac.Attachment.FileName)</a></td>
                                                <td>
                                                    <div class="MED">
                                                        <div class="MED-image @(ac.Attachment == null ? "not-allowed" : "")"><a class="@(ac.UpdatedOn == "" ? "disabled" : "")"><img src="~/contents/img/message.png" alt="message" /></a></div>
                                                        <div class="MED-image @(ac.Attachment == null ? "not-allowed" : "")">
                                                            <a data-SearchFor="@ac.Action" onclick="ViewAction(@ac.NotificationActionId,this)" class="light-blue @(ac.UpdatedOn == "" ? "disabled" : "")"><img src="~/contents/img/show.png" alt="show" /></a>
                                                        </div>
                                                        <div class="MED-image @(ac.Attachment == null ? "not-allowed" : "")">
                                                            <a href="@(ac.Attachment == null ? "" : ac.Attachment.Path)" class="light-blue @(ac.Attachment == null ? "pointer-events-none" : "")" download="@(ac.Attachment == null ? "" : ac.Attachment.FileName)"><img src="~/contents/img/download.png" alt="download" /></a>
                                                        </div>
                                                    </div>
                                                </td>

                                                @if (ac.CompletedOn == "")
                                                {
                                                    <td>
                                                        <span><a data-toggle="modal" data-SearchFor="@ac.Action" onclick="EditAction(@ac.NotificationActionId,this);"><img src="~/contents/img/bedit.png" alt="edit" /></a></span>
                                                        <input type="hidden" id="hdnRemarks_@ac.NotificationActionId" value="@ac.Remarks" />
                                                        <input type="hidden" id="hdnActionId_@ac.NotificationActionId" value="@ac.ActionId" />
                                                    </td>

                                                }
                                                else
                                                {
                                                    <td>
                                                        <input type="hidden" id="hdnRemarks_@ac.NotificationActionId" value="@ac.Remarks" />
                                                        <input type="hidden" id="hdnActionId_@ac.NotificationActionId" value="@ac.ActionId" />
                                                    </td>
                                                }
                                            </tr>
                                        }
                                    </tbody>
                                </table>
                            }
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

<!-- Update/Close Action Popup start -->

<div class="modal fade selecthrmodal" id="actionneededId" role="dialog">
    <div class="modal-dialog modal-lg selecthrdialog">
        <div class="modal-content selecthrcontent">
            <div class="modal-header selecthrheader">
                <button type="button" class="close selecthrclose" data-dismiss="modal">
                    <span class="glyphicon glyphicon-remove"></span>
                </button>
            </div>
            <div class="modal-body selecthrbody">
                <div class="row">
                    <div class="col-xs-12 col-sm-12 col-md-12">
                        <div class="col-xs-12 col-sm-12 col-md-12 selecthrbodyinner">
                            <div class="col-xs-12 col-sm-12 col-md-12 top-offset-10">
                                <div class="notificationnumber padding-bottom-10">
                                    <div class="row">
                                        <div class="col-xs-12 col-sm-12 col-md-12">
                                            <h4 class="selecthrheading2">Update Notification Status for (<span class="ActionName"></span>):</h4>
                                        </div>
                                    </div>
                                </div>
                                <div class="top-offset-10">
                                    <div class="row top-offset-10">
                                        <div class="col-xs-12 col-sm-4 col-md-4">
                                            <p class="wto-label-normal"><b>Notification Number</b> <span class="pull-right">:</span></p>
                                        </div>
                                        <div class="col-xs-12 col-sm-8 col-md-8">
                                            <p class="wto-label-normal">@Model.NotificationNumber</p>
                                        </div>
                                    </div>
                                    <div class="row top-offset-10">
                                        <div class="col-xs-12 col-sm-4 col-md-4">
                                            <p class="wto-label-normal"><b>Title</b> <span class="pull-right">:</span></p>
                                        </div>
                                        <div class="col-xs-12 col-sm-8 col-md-8">
                                            <p class="wto-label-normal">@Model.NotificationTitle</p>
                                        </div>
                                    </div>
                                    <div class="row top-offset-10">
                                        <div class="col-xs-12 col-sm-4 col-md-4">
                                            <p class="wto-label-normal"><b>Date</b><span class="pull-right">:</span></p>
                                        </div>
                                        <div class="col-xs-12 col-sm-8 col-md-8">
                                            @if (Model.MeetingDate == "")
                                            {
                                                <p class="wto-label-normal">
                                                    <input type="text" id="txtMeetingDate" class="form-control date-picker whitebackground" />
                                                    <i class="glyphicon glyphicon-calendar form-control-feedback blue-color"></i>
                                                </p>
                                            }
                                            else
                                            {
                                                <p class="wto-label-normal" id="txtMeetingDate">@Model.MeetingDate</p>
                                            }
                                        </div>
                                    </div>
                                    <div class="row top-offset-10">
                                        <div class="col-xs-12 col-sm-4 col-md-4">
                                            <p class="wto-label-normal"><b>Action Closed to</b><span class="pull-right">:</span></p>
                                        </div>
                                        <div class="col-xs-12 col-sm-8 col-md-8">
                                            <p class="wto-label-normal"><b><span class="ActionName"></span></b></p>
                                        </div>
                                    </div>
                                    <div class="row top-offset-10">
                                        <div class="col-xs-12 col-sm-4 col-md-4">
                                            <p class="wto-label-normal"><b>Action Due On</b><span class="pull-right">:</span></p>
                                        </div>
                                        <div class="col-xs-12 col-sm-8 col-md-8">
                                            <p class="wto-label-normal">
                                                <input type="text" id="txtActionDueOn" class="form-control date-picker whitebackground" />
                                                <i class="glyphicon glyphicon-calendar form-control-feedback blue-color"></i>
                                            </p>
                                        </div>
                                    </div>
                                    <div class="row top-offset-10">
                                        <div class="col-xs-12 col-sm-4 col-md-4">
                                            <p class="wto-label-normal"><b>Remarks</b><span class="pull-right">:</span></p>
                                        </div>
                                        <div class="col-xs-12 col-sm-8 col-md-8">
                                            <textarea id="txtRemarks" class="form-control  whitebackground" cols="30" rows="4"></textarea>
                                        </div>
                                    </div>
                                    <div class="row top-offset-10">
                                        <div class="col-xs-12 col-sm-4 col-md-4">
                                            <p class="wto-label-normal"><b>Attachment</b><span class="pull-right">:</span></p>
                                        </div>
                                        <div class="col-xs-12 col-sm-8 col-md-8">
                                            <div class="fileinput fileinput-new" data-provides="fileinput">
                                                <span class="btn btn-blue btn-file"><span>Choose file</span><input type="file" class="fileholder2" id="fileActionAttachment" /></span>
                                                <span class="fileinput-filename"></span><span class="fileinput-new dark-blue underline" id="ActionAttachmenName">No File Choose</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div class="col-xs-12 col-sm-12 col-md-12 top-offset-20 bottom-offset-20">
                                <div class="row">
                                    <div class="col-xs-12 col-sm-12 col-md-12">
                                        <a class="btn btn-red btn-padding pull-right left-offset-10 " data-dismiss="modal">Close</a>
                                        <a id="btnCloseAction" class="btn btn-light-blue btn-padding pull-right left-offset-10 " onclick="ValidateAction('Closed')">Close Action</a>
                                        <a id="btnUpdateStatus" class="btn btn-blue btn-padding pull-right " onclick="ValidateAction('Update')">Update Status</a>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--Update/Close Action Popup start -->
